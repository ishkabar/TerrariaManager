<UserControl x:Class="Ogur.Terraria.Manager.Devexpress.Views.LoginView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
      xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
      xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
      Background="#1e1e1e">

    <Grid Margin="20">
        <dxlc:LayoutControl Orientation="Vertical"
                           MaxWidth="350"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center">

            <!-- Title -->
            <dxlc:LayoutItem>
                <StackPanel Orientation="Horizontal"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20">
                    <TextBlock Text="ðŸŽ®"
                              FontSize="32"
                              VerticalAlignment="Center"
                              Margin="0,0,10,0"/>
                    <TextBlock Text="Terraria Manager"
                              FontSize="28"
                              FontWeight="Bold"
                              Foreground="White"
                              VerticalAlignment="Center"/>
                </StackPanel>
            </dxlc:LayoutItem>

            <!-- Username -->
            <dxlc:LayoutItem Label="Username"
                            LabelPosition="Top"
                            Margin="0,0,0,15">
                <dxlc:LayoutItem.LabelTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}"
                                  Foreground="White"
                                  FontSize="14"
                                  Margin="0,0,0,5"/>
                    </DataTemplate>
                </dxlc:LayoutItem.LabelTemplate>
                <dxe:TextEdit x:Name="UsernameBox"
                             EditValue="{Binding Username, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             FontSize="14"
                             Height="36"
                             Background="#2d2d30"
                             Foreground="White"
                             BorderBrush="#3e3e42"
                             BorderThickness="1"
                             IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"/>
            </dxlc:LayoutItem>

            <!-- Password -->
            <dxlc:LayoutItem Label="Password"
                            LabelPosition="Top"
                            Margin="0,0,0,15">
                <dxlc:LayoutItem.LabelTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}"
                                  Foreground="White"
                                  FontSize="14"
                                  Margin="0,0,0,5"/>
                    </DataTemplate>
                </dxlc:LayoutItem.LabelTemplate>
                <dxe:PasswordBoxEdit x:Name="PasswordBox"
                                    EditValue="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    FontSize="14"
                                    Height="36"
                                    Background="#2d2d30"
                                    Foreground="White"
                                    BorderBrush="#3e3e42"
                                    BorderThickness="1"
                                    KeyDown="PasswordBox_KeyDown"
                                    IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"/>
            </dxlc:LayoutItem>

            <!-- Loading Indicator -->
            <dxlc:LayoutItem Margin="0,0,0,10">
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center"
                            Visibility="{Binding IsLoading, Converter={StaticResource BoolToVis}}">
                    <TextBlock Text="â³"
                               FontSize="14"
                               Margin="0,0,5,0"
                               VerticalAlignment="Center"/>
                    <TextBlock Text="Logging in..."
                               Foreground="#aaaaaa"
                               FontSize="12"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </dxlc:LayoutItem>

            <!-- Error Message -->
            <dxlc:LayoutItem Margin="0,0,0,10">
                <TextBlock Text="{Binding ErrorMessage}"
                           Foreground="#ff4444"
                           FontSize="12"
                           TextWrapping="Wrap"
                           HorizontalAlignment="Center"
                           Visibility="{Binding ErrorMessage, Converter={StaticResource NullToCollapsedConverter}}"/>
            </dxlc:LayoutItem>



            <!-- Login Button -->
            <dxlc:LayoutItem>
                <dx:SimpleButton Content="Login"
                                 Command="{Binding LoginCommand}"
                                 Style="{StaticResource PrimaryButton}"
                                 Height="40"
                                 FontSize="16"/>
            </dxlc:LayoutItem>

            <!-- Remember Me Checkbox -->
            <dxlc:LayoutItem Margin="0,15,0,0">
                <CheckBox Content="Remember me"
                          IsChecked="{Binding RememberMe, Mode=TwoWay}"
                          Foreground="White"
                          FontSize="13"
                          VerticalAlignment="Center"
                          IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}">
                    <CheckBox.Style>
                        <Style TargetType="CheckBox">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="CheckBox">
                                        <StackPanel Orientation="Horizontal">
                                            <Border x:Name="CheckBoxBorder"
                                                    Width="18"
                                                    Height="18"
                                                    Background="#2d2d30"
                                                    BorderBrush="#3e3e42"
                                                    BorderThickness="1"
                                                    CornerRadius="3"
                                                    Margin="0,0,8,0">
                                                <TextBlock x:Name="CheckMark"
                                                          Text="âœ“"
                                                          Foreground="#007acc"
                                                          FontSize="14"
                                                          FontWeight="Bold"
                                                          HorizontalAlignment="Center"
                                                          VerticalAlignment="Center"
                                                          Visibility="Collapsed"/>
                                            </Border>
                                            <ContentPresenter VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsChecked" Value="True">
                                                <Setter TargetName="CheckMark" Property="Visibility" Value="Visible"/>
                                                <Setter TargetName="CheckBoxBorder" Property="Background" Value="#3e3e42"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </CheckBox.Style>
                </CheckBox>
            </dxlc:LayoutItem>

        </dxlc:LayoutControl>
    </Grid>
</UserControl>