<UserControl x:Class="Ogur.Terraria.Manager.Devexpress.Views.LoginView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
      xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
      xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
      Background="#1e1e1e">

    <Grid Margin="20">
        <dxlc:LayoutControl Orientation="Vertical"
                           MaxWidth="350"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center">

            <!-- Title -->
            <dxlc:LayoutItem>
                <StackPanel Orientation="Horizontal"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20">
                    <TextBlock Text="ðŸŽ®"
                              FontSize="32"
                              VerticalAlignment="Center"
                              Margin="0,0,10,0"/>
                    <TextBlock Text="Terraria Manager"
                              FontSize="28"
                              FontWeight="Bold"
                              Foreground="White"
                              VerticalAlignment="Center"/>
                </StackPanel>
            </dxlc:LayoutItem>

            <!-- Username -->
            <dxlc:LayoutItem Label="Username"
                            LabelPosition="Top"
                            Margin="0,0,0,15">
                <dxlc:LayoutItem.LabelTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}"
                                  Foreground="White"
                                  FontSize="14"
                                  Margin="0,0,0,5"/>
                    </DataTemplate>
                </dxlc:LayoutItem.LabelTemplate>
                <dxe:TextEdit x:Name="UsernameBox"
                             EditValue="{Binding Username, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             FontSize="14"
                             Height="36"
                             Background="#2d2d30"
                             Foreground="White"
                             BorderBrush="#3e3e42"
                             BorderThickness="1"
                             IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"/>
            </dxlc:LayoutItem>

            <!-- Password -->
            <dxlc:LayoutItem Label="Password"
                            LabelPosition="Top"
                            Margin="0,0,0,15">
                <dxlc:LayoutItem.LabelTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}"
                                  Foreground="White"
                                  FontSize="14"
                                  Margin="0,0,0,5"/>
                    </DataTemplate>
                </dxlc:LayoutItem.LabelTemplate>
                <dxe:PasswordBoxEdit x:Name="PasswordBox"
                                    EditValue="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    FontSize="14"
                                    Height="36"
                                    Background="#2d2d30"
                                    Foreground="White"
                                    BorderBrush="#3e3e42"
                                    BorderThickness="1"
                                    KeyDown="PasswordBox_KeyDown"
                                    IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"/>
            </dxlc:LayoutItem>

            <!-- Loading Indicator -->
            <dxlc:LayoutItem Margin="0,0,0,10">
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center"
                            Visibility="{Binding IsLoading, Converter={StaticResource BoolToVis}}">
                    <TextBlock Text="â³"
                               FontSize="14"
                               Margin="0,0,5,0"
                               VerticalAlignment="Center"/>
                    <TextBlock Text="Logging in..."
                               Foreground="#aaaaaa"
                               FontSize="12"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </dxlc:LayoutItem>

            <!-- Error Message -->
            <dxlc:LayoutItem Margin="0,0,0,10">
                <TextBlock Text="{Binding ErrorMessage}"
                           Foreground="#ff4444"
                           FontSize="12"
                           TextWrapping="Wrap"
                           HorizontalAlignment="Center"
                           Visibility="{Binding ErrorMessage, Converter={StaticResource NullToCollapsedConverter}}"/>
            </dxlc:LayoutItem>

            <!-- Login Button -->
            <dxlc:LayoutItem>
                <dx:SimpleButton Content="Login"
                                Command="{Binding LoginCommand}"
                                Style="{StaticResource PrimaryButton}"
                                Height="40"
                                FontSize="16"/>
            </dxlc:LayoutItem>

        </dxlc:LayoutControl>
    </Grid>
</UserControl>